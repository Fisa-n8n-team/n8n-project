{
  "name": "n8n_algorithm_workflow",
  "nodes": [
    {
      "parameters": {
        "owner": {
          "__rl": true,
          "value": "",
          "mode": "name"
        },
        "repository": {
          "__rl": true,
          "value": "",
          "mode": "name"
        },
        "events": [
          "push"
        ],
        "options": {}
      },
      "type": "n8n-nodes-base.githubTrigger",
      "typeVersion": 1,
      "position": [
        -480,
        1280
      ],
      "id": "da1b7a38-fa74-42e8-a692-76b59678146a",
      "name": "Github Trigger",
      "webhookId": "YOUR_WEBHOOK_ID_REDACTED",
      "credentials": {
        "githubApi": {
          "id": "CREDENTIAL_ID_REDACTED",
          "name": "GitHub account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "81406806-faa3-48e6-9a9c-af76922bab78",
              "leftValue": "={{ $json.body.head_commit.message }}",
              "rightValue": "BaekjoonHub",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -256,
        1456
      ],
      "id": "e8a1676f-672b-4557-a94e-33a8a19d79ff",
      "name": "If"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "529d3b8a-5ea6-4ec7-9679-0a00e48d3ae9",
              "name": "problem_title",
              "value": "={{ $json.body.head_commit.message.split('Title: ')[1].split(', Time:')[0].trim() }}",
              "type": "string"
            },
            {
              "id": "3c7c49a8-2305-416d-aaae-dd31c993362a",
              "name": "difficulty",
              "value": "={{ $json.body.head_commit.message.split(']')[0].replace('[', '') }}",
              "type": "string"
            },
            {
              "id": "e135e374-2a3e-4490-9eb7-f8b376c8484c",
              "name": "author_name",
              "value": "={{ $json.body.head_commit.author.name }}",
              "type": "string"
            },
            {
              "id": "e76f0e8d-9779-48f6-a885-eae518055f39",
              "name": "commit_url",
              "value": "={{ $json.body.head_commit.url }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        0,
        1440
      ],
      "id": "83da28c7-6f10-4705-9c3c-a34d3a2d8b78",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "select": "channel",
        "channelId": {
          "__rl": true,
          "value": "",
          "mode": "id"
        },
        "text": "=ðŸŽ‰ {{ $json.author_name }}ë‹˜ì´ ë¬¸ì œë¥¼ í’€ì—ˆìŠµë‹ˆë‹¤!  \n\nðŸ“š ë¬¸ì œ: {{ $json.problem_title }} \nðŸ… ë‚œì´ë„: {{ $json.difficulty }} \nðŸ”— ë§í¬: {{ $json.commit_url }}",
        "otherOptions": {}
      },
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.4,
      "position": [
        208,
        1440
      ],
      "id": "f3b598f8-6ee0-473b-a0d6-1ef3c8cbd0c4",
      "name": "Send a message",
      "webhookId": "YOUR_WEBHOOK_ID_REDACTED",
      "credentials": {
        "slackApi": {
          "id": "CREDENTIAL_ID_REDACTED",
          "name": "Slack account"
        }
      }
    },
    {
      "parameters": {
        "owner": {
          "__rl": true,
          "value": "",
          "mode": "name"
        },
        "repository": {
          "__rl": true,
          "value": "",
          "mode": "url"
        },
        "events": [
          "push"
        ],
        "options": {}
      },
      "type": "n8n-nodes-base.githubTrigger",
      "typeVersion": 1,
      "position": [
        -480,
        1456
      ],
      "id": "c8a68e4c-1943-45fc-8618-b8411d87bf14",
      "name": "Github Trigger1",
      "webhookId": "YOUR_WEBHOOK_ID_REDACTED",
      "credentials": {
        "githubApi": {
          "id": "CREDENTIAL_ID_REDACTED",
          "name": "GitHub account 2"
        }
      }
    },
    {
      "parameters": {
        "owner": {
          "__rl": true,
          "value": "",
          "mode": "name"
        },
        "repository": {
          "__rl": true,
          "value": "",
          "mode": "url"
        },
        "events": [
          "push"
        ],
        "options": {}
      },
      "type": "n8n-nodes-base.githubTrigger",
      "typeVersion": 1,
      "position": [
        -480,
        1632
      ],
      "id": "053f446b-8b65-4ba9-8ce1-ff207406bfef",
      "name": "Github Trigger2",
      "webhookId": "YOUR_WEBHOOK_ID_REDACTED",
      "credentials": {
        "githubApi": {
          "id": "CREDENTIAL_ID_REDACTED",
          "name": "GitHub account 4"
        }
      }
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -480,
        1088
      ],
      "id": "85e088c3-6feb-49c0-94c3-7f165522fa30",
      "name": "Webhook",
      "webhookId": "YOUR_WEBHOOK_ID_REDACTED"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "f8844da0-a855-4155-a5fb-f086601bcacc",
              "name": "data",
              "value": "={{ JSON.parse($json.body.payload) }}",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -288,
        1088
      ],
      "id": "fdcca436-269b-4a34-a525-996251634c78",
      "name": "Edit Fields2"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "de800732-66b9-4b8c-ac1d-50f97061b21c",
              "name": "user_name",
              "value": "={{ $json.data.user.username }}",
              "type": "string"
            },
            {
              "id": "e909a76d-af5f-4788-b55e-545961944943",
              "name": "title",
              "value": "={{ $json.data.message.blocks[0].text.text.split('] ')[1].split('*')[0] }}",
              "type": "string"
            },
            {
              "id": "9ff8095e-b5c5-40b2-aee0-4eb9f549ec78",
              "name": "problem_url",
              "value": "={{ $json.data.message.blocks[0].text.text.split('ë¬¸ì œ URL: ')[1].split('\\n')[0] }}",
              "type": "string"
            },
            {
              "id": "f18957d2-3f5e-499f-a9fe-6e053766e502",
              "name": "difficulty",
              "value": "={{ $json.data.message.blocks[0].text.text.split('ë‚œì´ë„: ')[1].split('\\n')[0] }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        144,
        1072
      ],
      "id": "30efe90d-9b90-4353-9927-0f714293ea71",
      "name": "Edit Fields3"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "9bf6403b-d9a4-40fe-a7cd-8feced84131c",
              "leftValue": "={{ $json.data.message.blocks[1].elements[0].action_id }}",
              "rightValue": "action_approve",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -80,
        1088
      ],
      "id": "9282c978-c7ff-45d0-90b7-5720fb0f6c75",
      "name": "If1"
    },
    {
      "parameters": {
        "resource": "database",
        "operation": "search",
        "text": "={{ $('Edit Fields3').item.json.user_name }}",
        "options": {}
      },
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.2,
      "position": [
        320,
        1072
      ],
      "id": "d3219400-13b4-4f45-868b-a3205bb22960",
      "name": "Search a database",
      "credentials": {
        "notionApi": {
          "id": "CREDENTIAL_ID_REDACTED",
          "name": "Notion account"
        }
      }
    },
    {
      "parameters": {
        "resource": "databasePage",
        "databaseId": {
          "__rl": true,
          "value": "={{ $json.id }}",
          "mode": "id"
        },
        "title": "={{ $('Edit Fields3').item.json.title }}",
        "propertiesUi": {
          "propertyValues": [
            {
              "key": "problem_URL|url",
              "urlValue": "={{ $('Edit Fields3').item.json.problem_url }}"
            },
            {
              "key": "ë‚œì´ë„|select",
              "selectValue": "={{ $('Edit Fields3').item.json.difficulty }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.2,
      "position": [
        528,
        1072
      ],
      "id": "dcdf46ce-07d5-45ca-b175-c7d273961a4f",
      "name": "Create a database page",
      "credentials": {
        "notionApi": {
          "id": "CREDENTIAL_ID_REDACTED",
          "name": "Notion account"
        }
      }
    },
    {
      "parameters": {
        "resource": "database",
        "operation": "search",
        "text": "={{ $json.author_name }}",
        "options": {}
      },
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.2,
      "position": [
        192,
        1648
      ],
      "id": "84f16ed3-6bf5-489d-81fa-3d6cff35803c",
      "name": "Search a database1",
      "credentials": {
        "notionApi": {
          "id": "CREDENTIAL_ID_REDACTED",
          "name": "Notion account"
        }
      }
    },
    {
      "parameters": {
        "resource": "databasePage",
        "operation": "getAll",
        "databaseId": {
          "__rl": true,
          "value": "={{ $json.id }}",
          "mode": "id"
        },
        "returnAll": true,
        "options": {}
      },
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.2,
      "position": [
        368,
        1648
      ],
      "id": "17392963-1fbd-4fea-b57b-5baf5ea1db83",
      "name": "Get many database pages2",
      "credentials": {
        "notionApi": {
          "id": "CREDENTIAL_ID_REDACTED",
          "name": "Notion account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "9a2320fa-c684-4488-a719-37008f950bea",
              "leftValue": "={{ $json.name }}",
              "rightValue": "={{ $('Edit Fields').item.json.problem_title }}",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.3,
      "position": [
        544,
        1648
      ],
      "id": "25d3f80a-040f-42b6-a8f9-853516933725",
      "name": "Filter4"
    },
    {
      "parameters": {
        "resource": "databasePage",
        "operation": "update",
        "pageId": {
          "__rl": true,
          "value": "={{ $json.id }}",
          "mode": "id"
        },
        "propertiesUi": {
          "propertyValues": [
            {
              "key": "ìƒíƒœ|status",
              "statusValue": "ì™„ë£Œ"
            },
            {
              "key": "URL|url",
              "urlValue": "={{ $('Edit Fields').item.json.commit_url }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.2,
      "position": [
        720,
        1648
      ],
      "id": "e8fb4f3a-08b6-44f7-ac52-9860adb16525",
      "name": "Update a database page2",
      "credentials": {
        "notionApi": {
          "id": "CREDENTIAL_ID_REDACTED",
          "name": "Notion account"
        }
      }
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "hours"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.3,
      "position": [
        -480,
        592
      ],
      "id": "ccf9ebc8-e27b-4113-9401-dd709372e194",
      "name": "Schedule Trigger1"
    },
    {
      "parameters": {
        "select": "channel",
        "channelId": {
          "__rl": true,
          "value": "",
          "mode": "id"
        },
        "messageType": "block",
        "blocksUi": "={\n\t\"blocks\": [\n\t\t{\n\t\t\t\"type\": \"section\",\n\t\t\t\"text\": {\n              \"type\": \"mrkdwn\",\n              \"text\": \"*â­ ì œëª©: [{{ $json.problemId }}] {{ $json.titleKo }}*\\nðŸ… ë‚œì´ë„: {{ $json.tierName }}\\nðŸ”— ë¬¸ì œ URL: https://www.acmicpc.net/problem/{{ $json.problemId }}\"\n            }\n\t\t},\n\t\t{\n\t\t\t\"type\": \"actions\",\n\t\t\t\"elements\": [\n\t\t\t\t{\n\t\t\t\t\t\"type\": \"button\",\n\t\t\t\t\t\"text\": {\n\t\t\t\t\t\t\"type\": \"plain_text\",\n\t\t\t\t\t\t\"text\": \"âœ… ìˆ˜ë½\"\n\t\t\t\t\t},\n\t\t\t\t\t\"style\": \"primary\",\n\t\t\t\t\t\"action_id\": \"action_approve\",\n\t\t\t\t\t\"value\": \"{{ $json.title }}|{{ $json.link }}|{{ $json.problemId }}\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"type\": \"button\",\n\t\t\t\t\t\"text\": {\n\t\t\t\t\t\t\"type\": \"plain_text\",\n\t\t\t\t\t\t\"text\": \"âŒ ê±°ì ˆ\"\n\t\t\t\t\t},\n\t\t\t\t\t\"style\": \"danger\",\n\t\t\t\t\t\"action_id\": \"action_decline\",\n\t\t\t\t\t\"value\": \"decline\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t]\n}",
        "otherOptions": {}
      },
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.4,
      "position": [
        496,
        576
      ],
      "id": "c3aa34af-81be-46ad-add3-8774db08c96a",
      "name": "Send a message6",
      "webhookId": "YOUR_WEBHOOK_ID_REDACTED",
      "credentials": {
        "slackApi": {
          "id": "CREDENTIAL_ID_REDACTED",
          "name": "Slack account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const CONFIG = {\n  // ===== ë¬¸ì œ ì¶”ì²œ ì„¤ì • =====\n  currentClass: 2,              \n  problemCount: 4,              \n  difficultyRange: [2, 15],      // ë¸Œë¡ ì¦ˆ 5 ~ ê³¨ë“œ 1 (level 1-15)\n  tierQuery: \"b5..g1\",          // API ì¿¼ë¦¬ìš© (ì°¸ê³ ìš©)\n  minSolvedCount: 10000,\n  excludeTags: [],              \n  \n  // ===== Slack í†µí•© ì„¤ì • =====\n  slackChannel: \"#ì•Œê³ ë¦¬ì¦˜\",     \n  messagePrefix: \"ðŸŽ¯ [ë¬¸ì œ ì¶”ì²œ]\",\n  \n  // ===== API ì„¤ì • =====\n  apiUrl: \"https://solved.ac/api/v3/search/problem\"\n};\nreturn { json: CONFIG };"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -272,
        592
      ],
      "id": "6d08e3ae-18b2-478e-9fa9-fa7ed13fbb82",
      "name": "Code in JavaScript7"
    },
    {
      "parameters": {
        "url": "=https://solved.ac/api/v3/search/problem",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "query",
              "value": "=Value: tier:{{ $json.tierQuery }} solvable:true lang:ko"
            },
            {
              "name": "sort",
              "value": "random"
            },
            {
              "name": "limit",
              "value": "100"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -112,
        592
      ],
      "id": "48833d39-2eff-4697-b5d2-a8b3b1692d02",
      "name": "HTTP Request3"
    },
    {
      "parameters": {
        "jsCode": "const config = $('Code in JavaScript7').first().json;\nconst apiResponse = $input.first().json;\nconst problems = apiResponse.items;\n\n// í‹°ì–´ ë§¤í•‘ í•¨ìˆ˜ ì¶”ê°€\nfunction getTierName(level) {\n  const tiers = {\n    1: 'ë¸Œë¡ ì¦ˆ 5', 2: 'ë¸Œë¡ ì¦ˆ 4', 3: 'ë¸Œë¡ ì¦ˆ 3', 4: 'ë¸Œë¡ ì¦ˆ 2', 5: 'ë¸Œë¡ ì¦ˆ 1',\n    6: 'ì‹¤ë²„ 5', 7: 'ì‹¤ë²„ 4', 8: 'ì‹¤ë²„ 3', 9: 'ì‹¤ë²„ 2', 10: 'ì‹¤ë²„ 1',\n    11: 'ê³¨ë“œ 5', 12: 'ê³¨ë“œ 4', 13: 'ê³¨ë“œ 3', 14: 'ê³¨ë“œ 2', 15: 'ê³¨ë“œ 1',\n    16: 'í”Œëž˜í‹°ë„˜ 5', 17: 'í”Œëž˜í‹°ë„˜ 4', 18: 'í”Œëž˜í‹°ë„˜ 3', 19: 'í”Œëž˜í‹°ë„˜ 2', 20: 'í”Œëž˜í‹°ë„˜ 1',\n    21: 'ë‹¤ì´ì•„ 5', 22: 'ë‹¤ì´ì•„ 4', 23: 'ë‹¤ì´ì•„ 3', 24: 'ë‹¤ì´ì•„ 2', 25: 'ë‹¤ì´ì•„ 1',\n    26: 'ë£¨ë¹„ 5', 27: 'ë£¨ë¹„ 4', 28: 'ë£¨ë¹„ 3', 29: 'ë£¨ë¹„ 2', 30: 'ë£¨ë¹„ 1'\n  };\n  return tiers[level] || `ë ˆë²¨ ${level}`;\n}\n\n// 1. í•„í„°ë§ & ëžœë¤ ì„ íƒ\nconst filtered = problems.filter(p => \n  p.level >= config.difficultyRange[0] && \n  p.level <= config.difficultyRange[1] &&\n  p.isSolvable &&\n  p.acceptedUserCount >= (config.minSolvedCount || 0)\n);\n\nconst shuffled = filtered.sort(() => 0.5 - Math.random());\nconst recommended = shuffled.slice(0, config.problemCount);\n\n// 2. ë°ì´í„° + í‹°ì–´ ì´ë¦„ ë¦¬í„´\nreturn recommended.map(p => ({\n    json: {\n        ...p,\n        tierName: getTierName(p.level),\n        config: config\n    }\n}));"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        80,
        592
      ],
      "id": "a7468daf-a608-45f2-a3d4-0482f6dee797",
      "name": "Code in JavaScript8"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        288,
        592
      ],
      "id": "73c50c30-f7fe-4fa0-b7b9-d62d850a57da",
      "name": "Loop Over Items"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.noOp",
      "name": "Replace Me",
      "typeVersion": 1,
      "position": [
        496,
        800
      ],
      "id": "f8c851c4-b5c7-4e92-b208-50e596924e9c"
    }
  ],
  "pinData": {},
  "connections": {
    "Github Trigger": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Send a message",
            "type": "main",
            "index": 0
          },
          {
            "node": "Search a database1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Github Trigger1": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Github Trigger2": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "Edit Fields2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields2": {
      "main": [
        [
          {
            "node": "If1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields3": {
      "main": [
        [
          {
            "node": "Search a database",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If1": {
      "main": [
        [
          {
            "node": "Edit Fields3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Search a database": {
      "main": [
        [
          {
            "node": "Create a database page",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get many database pages2": {
      "main": [
        [
          {
            "node": "Filter4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter4": {
      "main": [
        [
          {
            "node": "Update a database page2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Search a database1": {
      "main": [
        [
          {
            "node": "Get many database pages2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger1": {
      "main": [
        [
          {
            "node": "Code in JavaScript7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript7": {
      "main": [
        [
          {
            "node": "HTTP Request3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request3": {
      "main": [
        [
          {
            "node": "Code in JavaScript8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript8": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "Send a message6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Replace Me",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replace Me": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false
  },
  "versionId": "30aca82c-9fbc-44cd-a8cb-0d59e4df0af4",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "INSTANCE_ID_REDACTED"
  },
  "id": "hGTNRFztikv2sHv9",
  "tags": []
}